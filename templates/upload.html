{% extends "layout.html" %}
{% block content %}
<h2>Upload Student Data</h2>

<form method="post" action="{{ url_for('upload') }}" enctype="multipart/form-data">
    <label for="file">Select CSV file:</label>
    <input type="file" name="file" id="file" accept=".csv" required>
    <button type="submit">Upload</button>
</form>

{% if message %}
<p style="color:green;">{{ message }}</p>
{% endif %}

{% if error %}
<p style="color:red;">{{ error }}</p>
{% endif %}

{% if students %}
<h3>Preview of Uploaded Data</h3>
<table border="1">
    <tr>
        {% for col in students[0].keys() %}
        <th>{{ col }}</th>
        {% endfor %}
    </tr>
    {% for row in students %}
    <tr>
        {% for col in row.values() %}
        <td>{{ col }}</td>
        {% endfor %}
    </tr>
    {% endfor %}
</table>
{% endif %}
{% endblock %}
